<!DOCTYPE html>
<html lang="en">

<head>
    <title>Zendin</title>

    <link rel="icon" type="image/x-icon" href="../assets/img/favicon.ico" />

    <script src="https://unpkg.com/@croquet/croquet@0.4.0"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/mrturck/aframe-joystick/master/joystick.min.js"></script>
    <script src="https://unpkg.com/aframe-template-component@3.x.x/dist/aframe-template-component.min.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@4.x.x/dist/aframe-layout-component.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.x.x/dist/aframe-event-set-component.min.js"></script>
    <script src="https://raw.githubusercontent.com/msj121/aframe-animation-component/master/dist/aframe-animation-component.min.js"></script>

    <script src="./scripts/constants.js"></script>
    <script src="./scripts/system.js"></script>
    <script src="./scripts/component.js"></script>
    <script src="./scripts/index.js" type="module"></script>

    <!-- fake hands for croquet -->
    <script src="./scripts/fake-hands.js"></script>

    <!-- timer helpers -->
    <script src="./scripts/timer/interval.js"></script>
    <script src="./scripts/timer/timeout.js"></script>

    <!-- garden generation/creation -->
    <script src="./scripts/garden-creation/simple-sun-sky.js"></script>
    <script src="./scripts/garden-creation/generate-base-garden.js"></script>
    <script src="./scripts/garden-creation/garden-asset-creation-menu.js"></script>
    <script src="./scripts/garden-creation/garden-asset-creation.js"></script>

    <!-- meditation -->
    <script src="./scripts/meditation/meditation-emitter.js"></script>
    <script src="./scripts/meditation/meditation-mode.js"></script>
    <script src="./scripts/meditation/meditation-light-mode.js"></script>
    <script src="./scripts/meditation/meditation-ring.js"></script>
    <script src="./scripts/meditation/meditation-ring-automated.js"></script>
    <script src="./scripts/meditation/breath-capture.js"></script>
    <script src="./scripts/meditation/cloud-meditation.js"></script>

    <!-- teleportation-->
    <script src="./scripts/blink-teleportation.js"></script>
    <script src="./scripts/teleportation-checkpoint.js"></script>
    <!-- new teleportation -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-blink-controls/dist/aframe-blink-controls.min.js"></script>

    <!-- yoga -->
    <script src="./scripts/yoga/yoga-emitter.js"></script>
    <script src="./scripts/yoga/yoga-mode.js"></script>

    <!-- menu -->
    <script src="./scripts/menu/menu-controls.js"></script>
    <script src="./scripts/menu/menu-button.js"></script>
    <script src="./scripts/menu/volume.js"></script>
    <script src="./scripts/menu/slider.js"></script>
    <script src="./scripts/menu/horizontal-button.js"></script>
    <script src="./scripts/menu/audio-button.js"></script>
    <script src="./scripts/menu/vertical-slider.js"></script>
    <script src="./scripts/menu/small-button.js"></script>
    <script src="./scripts/menu/title.js"></script>

    <script src="./scripts/joystick.js"></script>
    <script src="./scripts/randomizeLocation.js"></script>
</head>

<body>
    <a-scene
      renderer="colorManagement: true; physicallyCorrectLights: true"
      croquet
      shadow="type: pcfsoft"
      color="#dbf5ff"
      fog="type: exponential; density: 0.004; far: 1000; near: 10; color: #eeeeee"
      animation__lighten_fog="property: fog.color; to: #eeeeee; dur: 2000; startEvents: endMeditation"
      animation__darken_fog="property: fog.color; to: #444444; dur: 2000; startEvents: startMeditation"
    >
        <!-- Load in assets -->
        <a-assets>
            <a-asset-item id="mountains" src="../assets/glb/mountain-range.glb"></a-asset-item>
            <a-asset-item id="env_arrow" src="../assets/obj/env_arrow.obj"></a-asset-item>

            <a-asset-item id="corner-wall-asset" src="../assets/glb/corner-wall.glb"></a-asset-item>
            <a-asset-item id="single-wall-asset" src="../assets/glb/large-wall.glb"></a-asset-item>
            <!-- cloud-meditation -->
            <a-asset-item id="walkable-cloud" src="../assets/glb/walkable-cloud.glb"></a-asset-item>
            <a-asset-item id="cloud1" src="../assets/glb/cloud1.glb"></a-asset-item>
            
            <a-asset-item id="right-hand-low" src="../assets/glb/rightHandLow.glb"></a-asset-item>
            <a-asset-item id="left-hand-low" src="../assets/glb/leftHandLow.glb"></a-asset-item>

            <template id="user-template">
                <a-entity class="user">
                    <a-sphere class="head" color="#ffffff" scale="0.2 0.3 0.2"></a-sphere>
                    <a-entity class="face" position="0 0.05 0">
                        <a-sphere class="eye" color="#efefef" position="0.16 0.08 -0.1" scale="0.05 0.05 0.05">
                            <a-sphere class="pupil" color="#000" position="0 0 -1" scale="0.2 0.2 0.2"></a-sphere>
                        </a-sphere>
                        <a-sphere class="eye" color="#efefef" position="-0.16 0.08 -0.1" scale="0.05 0.05 0.05">
                            <a-sphere class="pupil" color="#000" position="0 0 -1" scale="0.2 0.2 0.2"></a-sphere>
                        </a-sphere>
                        <a-cylinder class="mouth" color="#000000" position="0 -0.128 -0.132" rotation="130 0 0"
                            scale="0.1 0.1 0.1"></a-cylinder>
                    </a-entity>
                </a-entity>
            </template>

            <template id="user-hands">
                <a-entity
                    class="left"
                    id="leftHand"
                    hand-controls="hand: left; handModelStyle: lowPoly"
                    raycaster="showLine: false; enabled: false; objects: .ground, .previewFrame;" 
                    garden-controls="menuId: menuItems; previewItemId: leftItem; gardenBaseId: garden; newAssetContainerId: new-asset-container"
                    blink-controls="cameraRig: #camRig; teleportOrigin: #cam; collisionEntities: #floor, .cloud-surface; curveShootingSpeed: 12"
                    breath-capture
                ></a-entity>
                <a-entity
                    class="right"
                    id="rightHand"
                    hand-controls="hand: right; handModelStyle: lowPoly"
                    raycaster="lineOpacity: 0.0; enabled: false; objects: .rightclickable;"
                    laser-controls="hand: right; model: false"
                    menu-controls
                >
                    <a-entity
                        id="leftItem"
                        file="kfarr_bases_valencia"
                        objectGroup="plants"
                        objectId="0"
                        gltf-model="url(../assets/glb/cherry-blossom.glb)"
                        rotation="-5 0 0"
                        scale="0.05 .05 .05"
                        position="0 -0.04 -0.4"
                    ></a-entity>
                    <a-entity
                        select-bar="controllerID: rightHand"
                        id="menuItems"
                        scale="0.7 0.7 0.7"
                        position="0 0.14 -0.03"
                        rotation="-85 0 0"
                    >
                        <optgroup label="Plants" value="plants">
                            <option value="short-grass" src="url(../assets/img/short-grass.png)" selected>Short Grass</option>
                            <option value="potted_plant_small" src="url(../assets/img/potted_plant_small.png)">Potted Plant</option>
                            <option value="bamboo" src="url(../assets/img/bamboo.png)">Bamboo</option>
                            <option value="flower-01" src="url(../assets/img/flower-01.png)">Flower 01</option>
                            <option value="flower-02" src="url(../assets/img/flower-02.png)">Flower 02</option>
                            <option value="flower-03" src="url(../assets/img/flower-03.png)">Flower 03</option>
                            <option value="flower-04" src="url(../assets/img/flower-04.png)">Flower 04</option>
                            <option value="flower-05" src="url(../assets/img/flower-05.png)">Flower 05</option>
                            <option value="flower-06" src="url(../assets/img/flower-06.png)">Flower 06</option>
                            <option value="grass-flower" src="url(../assets/img/grass-flower.png)">Grass Flower</option>
                            <option value="tall-grass" src="url(../assets/img/tall-grass.png)">Tall Grass</option>
                        </optgroup>
                    </a-entity>
                </a-entity>
            </template>

            <template id="user-hands-fake">
                <a-entity class="user">
                    <a-entity id="leftHandFake" class="left" fake-hands="hand: left; handModelStyle: lowPoly"></a-entity>
                    <a-entity id="rightHandFake" class="right" fake-hands="hand: right; handModelStyle: lowPoly"></a-entity>
                </a-entity>
            </template>

            <a-asset-item
              id="lantern"
              src="../assets/glb/stone-lantern.glb"
            ></a-asset-item>
            <a-asset-item
              id="flame"
              src="../assets/glb/lantern-flame.glb"
            ></a-asset-item>

            <!-- music -->
            <audio id="background-music" src="../assets/Music/default.m4a" preload="auto"></audio>
            <audio id="meditation-music" src="../assets/Music/meditation.m4a" preload="auto"></audio>

            <audio id="As-the-rain" src="../assets/Music/As-the-rain_AdobeStock_353732184_preview.m4a" preload="auto"></audio>
            <audio id="Breath-of-life" src="../assets/Music/Breath-Of-Life_AdobeStock_331838231_preview.m4a" preload="auto"></audio>
            <audio id="Imaginary-waterfalls" src="../assets/Music/Imaginary-Waterfalls_AdobeStock_356916496_preview.m4a" preload="auto"></audio>
            <audio id="Meditation-Aquatic" src="../assets/Music/Meditation-Aquatic_AdobeStock_357614213_preview.m4a" preload="auto"></audio>
            <audio id="Fairy-Forest" src="../assets/Music/Yuriy-Buntov---Fairy-Forest_AdobeStock_353743366_preview (1).m4a" preload="auto"></audio>
            <audio id="State-of-Zen" src="../assets/Music/State-of-Zen_AdobeStock_331832985_preview.m4a" preload="auto"></audio>
            <audio id="Wren" src="../assets/Music/Wren_AdobeStock_356531497_preview.m4a" preload="auto"></audio>

            <!-- ambience -->
            <audio id="Frogs-ambience" src="../assets/Ambience/frogs.wav" preload="auto"></audio>
            <audio id="City_Rain_Birds" src="../assets/Ambience/City_Rain_Birds.mp3" preload="auto"></audio>
            <audio id="City_Rain" src="../assets/Ambience/City_Rain.mp3" preload="auto"></audio>

            <!--meditation scripts-->
            <audio id="confidence-meditation" src="../assets/meditation-scripts/Confidence.mp3" preload="auto"></audio>
            <audio id="meditation-1" src="../assets/meditation-scripts/Meditation 1.mp3" preload="auto"></audio>
            <audio id="rain" src="../assets/meditation-scripts/Rain.mp3" preload="auto"></audio>
            <!-- TODO do this -->
            <audio id="breath-exercise-meditation-1" src="../assets/meditation-scripts/breath-exercise-meditation-1.m4a" preload="auto"></audio>
            <audio id="breath-exercise-meditation-2" src="../assets/meditation-scripts/breath-exercise-meditation-2.m4a" preload="auto"></audio>
            <audio id="breath-exercise-meditation-3" src="../assets/meditation-scripts/breath-exercise-meditation-3.m4a" preload="auto"></audio>

            <!--a-asset-item id="meditation-building" src="../assets/glb/meditation-room.glb"></a-asset-item-->
            <a-asset-item id="meditation-building" 
                src="https://cdn.glitch.com/d278d22e-cba0-423d-9948-00c332e0a3d7%2Fmeditation-room-small.glb?v=1618960941936">
            </a-asset-item>

            <!-- yoga images -->
            <!-- note: there's gotta be a better way to load these. -->
            <img id="yoga-short-0" src="../assets/img/yoga/yoga-short/yoga-0.png">
            <img id="yoga-short-1" src="../assets/img/yoga/yoga-short/yoga-1.png">
            <img id="yoga-short-2" src="../assets/img/yoga/yoga-short/yoga-2.png">
            <img id="yoga-short-3" src="../assets/img/yoga/yoga-short/yoga-3.png">
            <img id="yoga-short-4" src="../assets/img/yoga/yoga-short/yoga-4.png">
            <img id="yoga-short-5" src="../assets/img/yoga/yoga-short/yoga-5.png">
            <img id="yoga-short-6" src="../assets/img/yoga/yoga-short/yoga-6.png">
            <img id="yoga-short-7" src="../assets/img/yoga/yoga-short/yoga-7.png">
            <img id="yoga-short-8" src="../assets/img/yoga/yoga-short/yoga-8.png">
            <img id="yoga-short-9" src="../assets/img/yoga/yoga-short/yoga-9.png">
            <img id="yoga-short-10" src="../assets/img/yoga/yoga-short/yoga-10.png">
            <img id="yoga-short-11" src="../assets/img/yoga/yoga-short/yoga-11.png">
            <!-- yoga audio -->
            <audio id="yoga-audio-short-0" src="../assets/img/yoga/yoga-short/short-audio/audio-0.mp3"></audio>
            <audio id="yoga-audio-short-1" src="../assets/img/yoga/yoga-short/short-audio/audio-1.mp3"></audio>
            <audio id="yoga-audio-short-2" src="../assets/img/yoga/yoga-short/short-audio/audio-2.mp3"></audio>
            <audio id="yoga-audio-short-3" src="../assets/img/yoga/yoga-short/short-audio/audio-3.mp3"></audio>
            <audio id="yoga-audio-short-4" src="../assets/img/yoga/yoga-short/short-audio/audio-4.mp3"></audio>
            <audio id="yoga-audio-short-5" src="../assets/img/yoga/yoga-short/short-audio/audio-5.mp3"></audio>
            <audio id="yoga-audio-short-6" src="../assets/img/yoga/yoga-short/short-audio/audio-6.mp3"></audio>
            <audio id="yoga-audio-short-7" src="../assets/img/yoga/yoga-short/short-audio/audio-7.mp3"></audio>
            <audio id="yoga-audio-short-8" src="../assets/img/yoga/yoga-short/short-audio/audio-8.mp3"></audio>
            <audio id="yoga-audio-short-9" src="../assets/img/yoga/yoga-short/short-audio/audio-9.mp3"></audio>
            <audio id="yoga-audio-short-10" src="../assets/img/yoga/yoga-short/short-audio/audio-10.mp3"></audio>
            <audio id="yoga-audio-short-11" src="../assets/img/yoga/yoga-short/short-audio/audio-11.mp3"></audio>
            
            <!-- menu -->
            <img id="meditation-img" src="../assets/img/menu/meditation.png"/>
            <img id="yoga-img" src="../assets/img/menu/yoga.png"/>
            <img id="clouds-img" src="../assets/img/menu/clouds.png"/>
            <img id="volume-img" src="../assets/img/menu/Volume_icon.png">
            <img id="sound-wave" src="../assets/img/sound_wave.png">
            <img id="back-arrow" src="../assets/img/Back_Arrow.png">
            <img id="play-button" src="../assets/img/menu/Play_Button.png">
            <img id="pause-button" src="../assets/img/menu/Pause_Button.png">
            <img id="replay-button" src="../assets/img/menu/Replay_Button.png">

            <!-- breath menu -->
            <img id="hourglass-img" src="../assets/img/hourglass.png">

            <!-- thumbnails for audio -->
            <img id="As-the-rain-img" src="../assets/img/rain_img.png">
            <img id="Fairy-Forest-img" src="../assets/img/forest.png">
            <img id="Breath-of-life-img" src="../assets/img/bird.png">
            <img id="Imaginary-waterfalls-img" src="../assets/img/waterfall.png">
            <img id="Meditation-Aquatic-img" src="../assets/img/aquatic.png">
            <img id="State-of-Zen-img" src="../assets/img/Zen-lotus.png">
            <img id="Wren-img" src="../assets/img/AdobeStock_129012566_Preview.png">

            <a-mixin
              id="frame"
              geometry="primitive: plane; width: 0.5783552; height: 0.8192"
              material="color: white; shader: flat"
              animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 500; easing: easeOutExpo; startEvents: mouseenter"
              animation__scale_reverse="property: scale; to: 1 1 1; dur: 500; easing: easeOutExpo; startEvents: mouseleave"
            ></a-mixin>
            <a-mixin
              id="poster"
              geometry="primitive: plane; width: 0.544768; height: 0.786432"
              material="color: white; shader: flat"
              position="0 0 0.008"
            ></a-mixin>
            <a-mixin
              id="info-text"
              geometry="primitive: plane; width: 0.544768; height: 0.786432"
              material="color: black; shader: flat; opacity: 0"
              position="0 0 0.01"
            >
            </a-mixin>
            <a-mixin
              id="thumbnail"
              geometry="primitive: plane; width: 0.3; height: 0.2"
              material="color: white; shader: flat"
              position="0 0 0.008"
            ></a-mixin>
            <a-mixin
              id="horizontal-menu"
              geometry="primitive: plane; width: 0.8; height: 0.5"
              material="color: white; shader: flat"
              position="0 0 0.008"
            ></a-mixin>
            <a-mixin
              id="small-square"
              geometry="primitive: plane; width: 0.2; height: 0.2"
              material="color: white; shader: flat"
              position="0 0 0.008"
            ></a-mixin>
            <!-- Note is there a way to make this "frame" mixin more general?? -->
            <a-mixin
              id="thumbnail-frame"
              geometry="primitive: plane; width: 0.33; height: 0.23"
              material="color: white; shader: flat"
              animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 500; easing: easeOutExpo; startEvents: mouseenter"
              animation__scale_reverse="property: scale; to: 1 1 1; dur: 500; easing: easeOutExpo; startEvents: mouseleave"
            ></a-mixin>
            <a-mixin
              id="horizontal-frame"
              geometry="primitive: plane; width: 0.83; height: 0.53"
              material="color: white; shader: flat"
              animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 500; easing: easeOutExpo; startEvents: mouseenter"
              animation__scale_reverse="property: scale; to: 1 1 1; dur: 500; easing: easeOutExpo; startEvents: mouseleave"
            ></a-mixin>

            <template id="activity-menu-template">
              <a-entity id="ui" position="0 1.5 -2.5" visible="false">
                <!-- 1 -->
                <a-entity id="first-menu" class="submenu" visible="false">
                  <a-entity id="meditation-button" class="option" mixin="frame" position="-0.4 0 0"
                    menu-button="title: Meditate; info: Take a breather; img: #meditation-img; width: 2">
                  </a-entity>
                  <a-entity id="yoga-button" class="option" mixin="frame" position="0.4 0 0"
                    menu-button="title: Yoga; info: Stretch out a bit; img: #yoga-img; width: 2">
                  </a-entity>
                </a-entity> <!-- 1 -->
                <!-- meditation submenu - removed class="rightclickable" from each button to avoid raycasting on it  -->
                <a-entity id="meditation-menu" class="submenu" visible="false">
                  <a-entity id="guided-meditation-button" class="option" mixin="frame" position="-1.05 0 0.2" rotation="0 20 0"
                    menu-button="title: Guided Meditation; info: Let us walk you through; img: #meditation-img; width: 1.2">
                  </a-entity>
                  <a-entity id="story-telling-button" class="option" mixin="frame" position="-0.35 0 0.1" rotation="0 0 0"
                    menu-button="title: Story Telling; info: Listen to a brief story; img: #meditation-img; width: 1.2">
                  </a-entity>
                  <a-entity id="confidence-booster-button" class="option" mixin="frame" position="0.35 0 0.1" rotation="0 0 0"
                    menu-button="title: Confidence Booster; info: Feel good about yourself; img: #meditation-img; width: 1.2">
                  </a-entity>
                  <a-entity id="breathing-exercise-button" class="option" mixin="frame" position="1.05 0 0.2" rotation="0 -20 0"
                    menu-button="title: Breathing Exercises; info: Improve meditation\nbreathing techniques; img: #meditation-img; width: 1.2">
                  </a-entity>
                  <a-entity id="cloud-meditation-button" class="option" mixin="frame" position="0 0.9 0.3" rotation="20 0 0"
                    menu-button="title: Head in the Clouds; info: Climb up the clouds\nand relax; img: #clouds-img; width: 1.2">
                  </a-entity>
                </a-entity> <!-- meditation submenu -->
                <!-- yoga submenu -->
                <a-entity id="yoga-menu" class="submenu" visible="false">
                  <!-- samples -->
                  <a-entity id="guided-yoga-button" class="option" mixin="frame" position="-0.7 0 0.1" rotation="0 20 0"
                    menu-button="title: Morning Yoga\nRoutine; info: Walk through a\nquick minute yoga\nroutine, perfect\nfor beginners; img: #yoga-img; width: 1.2">
                  </a-entity>
                  <a-entity id="yoga-button-2" class="option" mixin="frame" position="0 0 0" rotation="0 0 0"
                    menu-button="title: Inner Flow; info: Enjoy a relaxing\nroutine that'll put\nyou at ease; img: #yoga-img; width: 1.2">
                  </a-entity>
                  <a-entity id="yoga-button-3" class="option" mixin="frame" position="0.7 0 0.1" rotation="0 -20 0"
                    menu-button="title: Unwind; info: Excellent for athletes\nand those stressed out; img: #yoga-img; width: 1.2">
                  </a-entity>
                </a-entity> <!-- meditation submenu -->

                 <!-- volume -->
                
                <a-entity id="volume-slider" class="slider" slider="title: Audio Volume" position="0 -0.7 0" visible="false">
                  
                </a-entity>
                <!-- volume -->

                <!-- audio -->
                <!-- TODO: Find Better way to organize multiple audios -->
                
                <!-- audio menu button-->
                <a-entity id="audio-menu" class="audio" visible="false" position="-0.7 -0.8 0">  <!--position="1.4 0 1.45" rotation="0 -70 0"-->
                  <a-entity id="audio-menu-button" class="small-button" small-button="color: black; title: AUDIO" scale="2 1 1"></a-entity>
                </a-entity>

                <a-entity id="function-buttons" class="audio" visible="false" position="0 -0.9 0">
                  <a-entity id="play-button" class="small-button" small-button="img: #play-button" position="-0.3 0 0"></a-entity>
                  <a-entity id="pause-button" class="small-button" small-button="img: #pause-button" position="0 0 0"></a-entity>
                  <a-entity id="replay-button" class="small-button" small-button="img: #replay-button" position="0.3 0 0"></a-entity>
                </a-entity>


                <a-entity id="audio-options" class="audio" visible="false">
                  <!-- back to audio menu button -->

                  <a-entity id="As-the-rain" class="small-button" audio-button="title: As The Rain; img: #As-the-rain-img" position="-0.45 0 0" mixin="thumbnail-frame"></a-entity>
                  <a-entity id="Fairy-Forest" class="small-button" audio-button="title: Fairy Forest; img: #Fairy-Forest-img" position="0 0 0" mixin="thumbnail-frame"></a-entity>
                  <a-entity id="Breath-of-life" class="small-button" audio-button="title: Breath of Life; img: #Breath-of-life-img" position="0.45 0 0" mixin="thumbnail-frame"></a-entity>
                  <a-entity id="Imaginary-waterfalls" class="small-button" audio-button="title: Imaginary Waterfalls; img: #Imaginary-waterfalls-img" position="-0.45 -0.45 0" mixin="thumbnail-frame"></a-entity>
                  <a-entity id="State-of-Zen" class="small-button" audio-button="title: State of Zen; img: #State-of-Zen-img" position="0 -0.45 0" mixin="thumbnail-frame"></a-entity>
                  <a-entity id="Wren" class="small-button" audio-button="title: Wren; img: #Wren-img" position="0.45 -0.45 0" mixin="thumbnail-frame"></a-entity>

                  <a-entity id="Frogs-ambience" class="small-button" audio-button="title: Evening Frogs" position="0.9 0 0" mixin="thumbnail-frame"></a-entity>
                  <a-entity id="City_Rain_Birds" class="small-button" audio-button="title: City Rain Birds" position="1.35 0 0" mixin="thumbnail-frame"></a-entity>
                  <a-entity id="City_Rain" class="small-button" audio-button="title: City Rain" position="1.8 0 0" mixin="thumbnail-frame"></a-entity>
                  
                  <a-entity id="audio-exit" class="back-button" audio-button="title: Back; img: #back-arrow" position="-0.85 0 0" scale="0.5 0.5 0.5"></a-entity>
                  <a-entity id="audio-menu-slider" class="audio-slider" vertical-slider="title: Audio Slider" position="-0.75 -0.4 0"></a-entity>

                </a-entity>
                <!-- audio -->

              </a-entity>
            </template>

            <template id="breath-meditation-template">
              <!-- Glowing ring used for breathing exercises -->
              <!-- User controlled ring -->
              <a-torus
                id="meditation-ring"
                position="0 1 -1"
                rotation="0 0 0"
                radius="0.05"
                radius-tubular="0.01"
                meditation-ring="breathCaptureId: leftHand"
                material="color: #ffffff; shader: flat"
              ></a-torus>
              <!-- Automated ring that gives feedback about if you are breathing correctly -->
              <a-torus
                id="meditation-automated-ring"
                position="0 1 -1"
                rotation="90 0 0"
                radius="0.05"
                radius-tubular="0.01"
                material="color: #ffffff; shader: flat"
                meditation-ring-automated="breathCaptureId: leftHand"
                >
              </a-torus>
              <a-box
                id="breath-meditation-menu"
                position="0.7 1.2 -1"
                rotation="0 -20 0"
                visible="false"
                width="0.8"
                height="0.4"
                depth="0.05"
                material="opacity: 0.3; color: yellow"
              >
                <a-entity
                  id="breath-meditation-text"
                  position="0 0.1 0"
                  scale="2 2 2"
                  text="value: breathing in; align: center; shader: flat; color: #ffffff"
                ></a-entity>
                <a-entity
                  id="breath-meditation-text-feedback"
                  scale="2 2 2"
                  text="value: Great!; align: center; shader: flat; color: #ffffff"
                ></a-entity>
                <a-image src="#hourglass-img" position="-0.15 -0.1 0" scale="0.12 0.12 0"></a-image>
                <a-entity
                  id="breath-meditation-timer"
                  position="0 -0.1 0"
                  scale="2 2 2"
                  text="value: 2:00; align: center; shader: flat; color: #ffffff"
                ></a-entity>
              </a-box>
            </template>

            <!-- menu -->
        </a-assets>
      
        <!-- yoga stuff -->
        <!-- <a-box position="1.5 0.75 14.55"
               scale="0.5 0.5 0.1"
               color="#A9A9A9">
        </a-box>
        <a-cylinder id="yoga-cylinder"
                    position="1.5 0.75 14.5"
                    radius="0.15"
                    height="0.1"
                    rotation="90 0 0"
                    class="rightclickable"
                    color="#FFC65D"
                    yoga-emitter>
        </a-cylinder> -->
        <a-image id="yoga-images" width="1.5" height="1.5" position="0 0.75 14" rotation="0 180 0"
                 sound="on: model-loaded, autoplay: true; positional: false; volume: 0.25">
            <!-- frame -->
            <a-cylinder radius="0.75" height="0.1" position="0 0.75 -0.25" rotation="90 0 0" color="#696969"></a-cylinder>
            <a-box width="3" height="0.5" position="0 -0.95 0" color="#DDBE91"></a-box>
            <a-box width="1.6" height="0.1" depth="0.5" position="0 0.75 0" color="#DDBE91"></a-box>
            <a-box width="1.6" height="0.1" depth="0.5" position="0 -0.75 0" color="#DDBE91"></a-box>
            <a-box width="1.6" height="0.1" depth="0.5" position="0.75 0 0" color="#DDBE91" rotation="0 0 90"></a-box>
            <a-box width="1.6" height="0.1" depth="0.5" position="-0.75 0 0" color="#DDBE91" rotation="0 0 90"></a-box>
        </a-image>
        <a-box id="yoga-mat" height="0.1" width="1" depth="2" position="0 0 11" color="#DB7093"></a-box>

        <a-entity id="timer" position="0 1.85 14" scale="10 10 10" rotation="0 180 0" visible="false"
                  text="color: white; align: center; value: 0;"></a-entity>

        <!-- Generated garden -->
        <a-entity id="garden" base-garden="sceneWidth: 4; sceneDepth: 4"></a-entity>
        <a-entity id="mountains" gltf-model="#mountains" position="0 -0.2 0" scale="3 4 3"></a-entity>
        <!-- Items placed by the user will be put in this entity -->
        <a-entity id="new-asset-container" croquet="name: new-asset-container"></a-entity>

        <!-- Sun and lighting -->
        <a-simple-sun-sky
          id="sky"
          sun-position="10 70 20"
          fog-color="#eeeeee"
          sound="on: model-loaded; src: #background-music; autoplay: true; loop: true; positional: false; volume: 0.1"
          meditation-mode
          yoga-mode
          radius="1000"
          light-color="#8fdeea"
          dark-color="#ebf7f5"
        >
        
            <a-entity id="meditation" class="audio" sound="src: #meditation-music; loop: true; autoplay: false; positional: false; volume: 0.1"></a-entity>
            <a-entity id="breathing-meditation" class="audio" sound="src: #Imaginary-waterfalls; loop: true; autoplay: false; positional: false; volume: 0.1"></a-entity>
            <!--scripts-->
            <a-entity id="meditation-1" class="audio" sound="src: #meditation-1; positional: false; volume: 0.1"></a-entity>
            <a-entity id="rain" class="audio" sound="src: #rain; positional: false; volume: 0.1"></a-entity>
            <a-entity id="confidence-meditation" class="audio" sound="src: #confidence-meditation; positional: false; volume: 0.1"></a-entity>

            <a-entity id="breathing-meditation-1" class="audio" sound="src: #breath-exercise-meditation-1; positional: false; volume: 0.1"></a-entity>
            <a-entity id="breathing-meditation-2" class="audio" sound="src: #breath-exercise-meditation-2; positional: false; volume: 0.1"></a-entity>
            <a-entity id="breathing-meditation-3" class="audio" sound="src: #breath-exercise-meditation-3; positional: false; volume: 0.1"></a-entity>

            <a-entity id="yoga-script" class="audio" sound="src: #yoga-audio-short-0; autoplay: false; loop: false; positional: false; volume: 0.1"></a-entity>
            <!--scripts-->
   
          
        </a-simple-sun-sky>
        <a-entity
          id="light"
          light="type: directional; color: #ffffff; castShadow: true; shadowCameraBottom:-30; shadowCameraTop: 30; shadowCameraLeft: -30; shadowCameraRight: 30; intensity: 2.5"
          position="5 20 10"
          meditation-light-mode
        ></a-entity>
        <a-entity
          light="type: hemisphere; color: #e0fbff; ground-color: #fffab3; intensity: 2.5"
          meditation-light-mode
        ></a-entity>

        <!-- Clouds -->
        <a-entity id="clouds" cloud-meditation></a-entity>

        <!-- controls tutorial -->
        <!-- <a-entity gltf-model="#single-wall-asset"
                  position="-2 0 -3.55"
                  rotation="0 180 0">
        </a-entity>
        <a-entity position="-2 1.5 -3.5"
                  scale="2.5 2.5 2.5"
                  text="color: black; align: center; font: exo2bold;
                        value: Left Hand: \ngrip to enable menu, \njoystick to navigate menu, \ny to place, \nx to undo;">
        </a-entity>
        <a-entity gltf-model="#single-wall-asset"
                  position="0 0 -3.55"
                  rotation="0 180 0">
        </a-entity>
        <a-entity position="0 1.5 -3.5"
                  scale="2.5 2.5 2.5"
                  text="color: black; align: center; font: exo2bold;
                        value: Meditation Mode\n|\nV;">
        </a-entity>
        <a-box position="0 1 -3.45"
               scale="0.5 0.5 0.1"
               color="#A9A9A9">
        </a-box>
        <a-cylinder position="0 1 -3.4"
                    radius="0.15"
                    height="0.1"
                    rotation="90 0 0"
                    class="clickable"
                    color="#FFC65D"
                    meditation-emitter>
        </a-cylinder>
        <a-entity gltf-model="#single-wall-asset"
                  position="2 0 -3.55"
                  rotation="0 180 0">
        </a-entity>
        <a-entity position="2 1.5 -3.5"
                  scale="2.5 2.5 2.5"
                  text="color: black; align: center; font: exo2bold;
                        value: Right Hand: \nclick to on teleport points \non the floor to move!\nclick on buttons to trigger them!;">
        </a-entity> -->

        <!-- testing out meditation start -->
        <a-entity
          class="lantern"
          gltf-model="#lantern"
          position="2 0 -3"
          shadow="receive: false; cast: true"
        >
          <a-entity class="flame" position="0 1 0" gltf-model="#flame" 
          visible="false"></a-entity>
        </a-entity>

        <a-entity
          class="lantern"
          gltf-model="#lantern"
          position="-2 0 -3"
          shadow="receive: false; cast: true"
        >
          <a-entity class="flame" position="0 1 0" gltf-model="#flame" 
            visible="false"></a-entity>
        </a-entity>

        <a-entity
          name="default" 
          gltf-model="#meditation-building" 
          scale="0.5 0.5 0.5" 
          rotation="0 90 0" 
          position="0 0.1 -1" 
          shadow="receive: true; cast: true"
        ></a-entity>

        <a-entity id="camRig">
          <a-camera
            id="cam"
            wasd-controls-enabled="true"  
            look-controls>
          </a-camera>
        </a-entity>
    </a-scene>
</body>

</html>